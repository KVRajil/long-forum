/*!
 * # Semantic UI - Progress
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2015 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,t,i,n){"use strict";e.fn.progress=function(t){var a,o=e(this),r=o.selector||"",s=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return o.each(function(){var o,h,p=e.isPlainObject(t)?e.extend(!0,{},e.fn.progress.settings,t):e.extend({},e.fn.progress.settings),m=p.className,f=p.metadata,g=p.namespace,v=p.selector,b=p.error,y="."+g,T="module-"+g,k=e(this),C=e(this).find(v.bar),E=e(this).find(v.progress),w=e(this).find(v.label),D=this,I=k.data(T),S=!1;h={initialize:function(){h.debug("Initializing progress bar",p),h.set.duration(),h.set.transitionEvent(),h.read.metadata(),h.read.settings(),h.instantiate()},instantiate:function(){h.verbose("Storing instance of progress",h),I=h,k.data(T,h)},destroy:function(){h.verbose("Destroying previous progress for",k),clearInterval(I.interval),h.remove.state(),k.removeData(T),I=n},reset:function(){h.set.percent(0)},complete:function(){(h.percent===n||h.percent<100)&&h.set.percent(100)},read:{metadata:function(){var e={percent:k.data(f.percent),total:k.data(f.total),value:k.data(f.value)};e.percent&&(h.debug("Current percent value set from metadata",e.percent),h.set.percent(e.percent)),e.total&&(h.debug("Total value set from metadata",e.total),h.set.total(e.total)),e.value&&(h.debug("Current value set from metadata",e.value),h.set.value(e.value),h.set.progress(e.value))},settings:function(){p.total!==!1&&(h.debug("Current total set in settings",p.total),h.set.total(p.total)),p.value!==!1&&(h.debug("Current value set in settings",p.value),h.set.value(p.value),h.set.progress(h.value)),p.percent!==!1&&(h.debug("Current percent set in settings",p.percent),h.set.percent(p.percent))}},increment:function(e){var t,i,n;h.has.total()?(i=h.get.value(),e=e||1,n=i+e,t=h.get.total(),h.debug("Incrementing value",i,n,t),n>t&&(h.debug("Value cannot increment above total",t),n=t)):(i=h.get.percent(),e=e||h.get.randomValue(),n=i+e,t=100,h.debug("Incrementing percentage by",i,n),n>t&&(h.debug("Value cannot increment above 100 percent"),n=t)),h.set.progress(n)},decrement:function(e){var t,i,n=h.get.total();n?(t=h.get.value(),e=e||1,i=t-e,h.debug("Decrementing value by",e,t)):(t=h.get.percent(),e=e||h.get.randomValue(),i=t-e,h.debug("Decrementing percentage by",e,t)),0>i&&(h.debug("Value cannot decrement below 0"),i=0),h.set.progress(i)},has:{total:function(){return h.get.total()!==!1}},get:{text:function(e){var t=h.value||0,i=h.total||0,n=S?h.get.displayPercent():h.percent||0,a=h.total>0?i-t:100-n;return e=e||"",e=e.replace("{value}",t).replace("{total}",i).replace("{left}",a).replace("{percent}",n),h.debug("Adding variables to progress bar text",e),e},randomValue:function(){return h.debug("Generating random increment percentage"),Math.floor(Math.random()*p.random.max+p.random.min)},numericValue:function(e){return"string"==typeof e?""!==e.replace(/[^\d.]/g,"")?+e.replace(/[^\d.]/g,""):!1:e},transitionEnd:function(){var e,t=i.createElement("element"),a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in a)if(t.style[e]!==n)return a[e]},displayPercent:function(){var e=C.width(),t=k.width(),i=parseInt(C.css("min-width"),10),n=e>i?e/t*100:h.percent;return p.precision>0?Math.round(n*(10*p.precision))/(10*p.precision):Math.round(n)},percent:function(){return h.percent||0},value:function(){return h.value||0},total:function(){return h.total||!1}},is:{success:function(){return k.hasClass(m.success)},warning:function(){return k.hasClass(m.warning)},error:function(){return k.hasClass(m.error)},active:function(){return k.hasClass(m.active)},visible:function(){return k.is(":visible")}},remove:{state:function(){h.verbose("Removing stored state"),delete h.total,delete h.percent,delete h.value},active:function(){h.verbose("Removing active state"),k.removeClass(m.active)},success:function(){h.verbose("Removing success state"),k.removeClass(m.success)},warning:function(){h.verbose("Removing warning state"),k.removeClass(m.warning)},error:function(){h.verbose("Removing error state"),k.removeClass(m.error)}},set:{barWidth:function(e){e>100?h.error(b.tooHigh,e):0>e?h.error(b.tooLow,e):(C.css("width",e+"%"),k.attr("data-percent",parseInt(e,10)))},duration:function(e){e=e||p.duration,e="number"==typeof e?e+"ms":e,h.verbose("Setting progress bar transition duration",e),C.css({"transition-duration":e})},percent:function(e){e="string"==typeof e?+e.replace("%",""):e,e=p.precision>0?Math.round(e*(10*p.precision))/(10*p.precision):Math.round(e),h.percent=e,h.has.total()||(h.value=p.precision>0?Math.round(e/100*h.total*(10*p.precision))/(10*p.precision):Math.round(e/100*h.total*10)/10,p.limitValues&&(h.value=h.value>100?100:h.value<0?0:h.value)),h.set.barWidth(e),h.set.labelInterval(),h.set.labels(),p.onChange.call(D,e,h.value,h.total)},labelInterval:function(){var e=function(){h.verbose("Bar finished animating, removing continuous label updates"),clearInterval(h.interval),S=!1,h.set.labels()};clearInterval(h.interval),C.one(o+y,e),h.timer=setTimeout(e,p.duration+100),S=!0,h.interval=setInterval(h.set.labels,p.framerate)},labels:function(){h.verbose("Setting both bar progress and outer label text"),h.set.barLabel(),h.set.state()},label:function(e){e=e||"",e&&(e=h.get.text(e),h.debug("Setting label to text",e),w.text(e))},state:function(e){e=e!==n?e:h.percent,100===e?!p.autoSuccess||h.is.warning()||h.is.error()?(h.verbose("Reached 100% removing active state"),h.remove.active()):(h.set.success(),h.debug("Automatically triggering success at 100%")):e>0?(h.verbose("Adjusting active progress bar label",e),h.set.active()):(h.remove.active(),h.set.label(p.text.active))},barLabel:function(e){e!==n?E.text(h.get.text(e)):"ratio"==p.label&&h.total?(h.debug("Adding ratio to bar label"),E.text(h.get.text(p.text.ratio))):"percent"==p.label&&(h.debug("Adding percentage to bar label"),E.text(h.get.text(p.text.percent)))},active:function(e){e=e||p.text.active,h.debug("Setting active state"),p.showActivity&&!h.is.active()&&k.addClass(m.active),h.remove.warning(),h.remove.error(),h.remove.success(),e&&h.set.label(e),p.onActive.call(D,h.value,h.total)},success:function(e){e=e||p.text.success,h.debug("Setting success state"),k.addClass(m.success),h.remove.active(),h.remove.warning(),h.remove.error(),h.complete(),e&&h.set.label(e),p.onSuccess.call(D,h.total)},warning:function(e){e=e||p.text.warning,h.debug("Setting warning state"),k.addClass(m.warning),h.remove.active(),h.remove.success(),h.remove.error(),h.complete(),e&&h.set.label(e),p.onWarning.call(D,h.value,h.total)},error:function(e){e=e||p.text.error,h.debug("Setting error state"),k.addClass(m.error),h.remove.active(),h.remove.success(),h.remove.warning(),h.complete(),e&&h.set.label(e),p.onError.call(D,h.value,h.total)},transitionEvent:function(){o=h.get.transitionEnd()},total:function(e){h.total=e},value:function(e){h.value=e},progress:function(e){var t,i=h.get.numericValue(e);i===!1&&h.error(b.nonNumeric,e),h.has.total()?(h.set.value(i),t=i/h.total*100,h.debug("Calculating percent complete from total",t),h.set.percent(t)):(t=i,h.debug("Setting value to exact percentage value",t),h.set.percent(t))}},setting:function(t,i){if(h.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,p,t);else{if(i===n)return p[t];p[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,h,t);else{if(i===n)return h[t];h[t]=i}},debug:function(){p.debug&&(p.performance?h.performance.log(arguments):(h.debug=Function.prototype.bind.call(console.info,console,p.name+":"),h.debug.apply(console,arguments)))},verbose:function(){p.verbose&&p.debug&&(p.performance?h.performance.log(arguments):(h.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),h.verbose.apply(console,arguments)))},error:function(){h.error=Function.prototype.bind.call(console.error,console,p.name+":"),h.error.apply(console,arguments)},performance:{log:function(e){var t,i,n;p.performance&&(t=(new Date).getTime(),n=s||t,i=t-n,s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:D,"Execution Time":i})),clearTimeout(h.performance.timer),h.performance.timer=setTimeout(h.performance.display,500)},display:function(){var t=p.name+":",i=0;s=!1,clearTimeout(h.performance.timer),e.each(l,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",r&&(t+=" '"+r+"'"),(console.group!==n||console.table!==n)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,i,o){var r,s,l,c=I;return i=i||d,o=D||o,"string"==typeof t&&c!==n&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(i,a){var o=i!=r?a+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(c[o])&&i!=r)c=c[o];else{if(c[o]!==n)return s=c[o],!1;if(!e.isPlainObject(c[a])||i==r)return c[a]!==n?(s=c[a],!1):(h.error(b.method,t),!1);c=c[a]}})),e.isFunction(s)?l=s.apply(o,i):s!==n&&(l=s),e.isArray(a)?a.push(l):a!==n?a=[a,l]:l!==n&&(a=l),s}},u?(I===n&&h.initialize(),h.invoke(c)):(I!==n&&I.invoke("destroy"),h.initialize())}),a!==n?a:this},e.fn.progress.settings={name:"Progress",namespace:"progress",debug:!1,verbose:!1,performance:!0,random:{min:2,max:5},duration:300,autoSuccess:!0,showActivity:!0,limitValues:!0,label:"percent",precision:0,framerate:1e3/30,percent:!1,total:!1,value:!1,onChange:function(e,t,i){},onSuccess:function(e){},onActive:function(e,t){},onError:function(e,t){},onWarning:function(e,t){},error:{method:"The method you called is not defined.",nonNumeric:"Progress value is non numeric",tooHigh:"Value specified is above 100%",tooLow:"Value specified is below 0%"},regExp:{variable:/\{\$*[A-z0-9]+\}/g},metadata:{percent:"percent",total:"total",value:"value"},selector:{bar:"> .bar",label:"> .label",progress:".bar > .progress"},text:{active:!1,error:!1,success:!1,warning:!1,percent:"{percent}%",ratio:"{value} of {total}"},className:{active:"active",error:"error",success:"success",warning:"warning"}}}(jQuery,window,document);