/*!
 * # Semantic UI - Rating
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2015 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,t,i,n){"use strict";e.fn.rating=function(t){var i,a=e(this),o=a.selector||"",r=(new Date).getTime(),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return a.each(function(){var d,h=e.isPlainObject(t)?e.extend(!0,{},e.fn.rating.settings,t):e.extend({},e.fn.rating.settings),p=h.namespace,m=h.className,f=h.metadata,g=h.selector,v=(h.error,"."+p),b="module-"+p,y=this,T=e(this).data(b),k=e(this),C=k.find(g.icon);d={initialize:function(){d.verbose("Initializing rating module",h),0===C.length&&d.setup.layout(),h.interactive?d.enable():d.disable(),d.set.rating(d.get.initialRating()),d.instantiate()},instantiate:function(){d.verbose("Instantiating module",h),T=d,k.data(b,d)},destroy:function(){d.verbose("Destroying previous instance",T),d.remove.events(),k.removeData(b)},refresh:function(){C=k.find(g.icon)},setup:{layout:function(){var t=d.get.maxRating(),i=e.fn.rating.settings.templates.icon(t);d.debug("Generating icon html dynamically"),k.html(i),d.refresh()}},event:{mouseenter:function(){var t=e(this);t.nextAll().removeClass(m.selected),k.addClass(m.selected),t.addClass(m.selected).prevAll().addClass(m.selected)},mouseleave:function(){k.removeClass(m.selected),C.removeClass(m.selected)},click:function(){var t=e(this),i=d.get.rating(),n=C.index(t)+1,a="auto"==h.clearable?1===C.length:h.clearable;a&&i==n?d.clearRating():d.set.rating(n)}},clearRating:function(){d.debug("Clearing current rating"),d.set.rating(0)},bind:{events:function(){d.verbose("Binding events"),k.on("mouseenter"+v,g.icon,d.event.mouseenter).on("mouseleave"+v,g.icon,d.event.mouseleave).on("click"+v,g.icon,d.event.click)}},remove:{events:function(){d.verbose("Removing events"),k.off(v)}},enable:function(){d.debug("Setting rating to interactive mode"),d.bind.events(),k.removeClass(m.disabled)},disable:function(){d.debug("Setting rating to read-only mode"),d.remove.events(),k.addClass(m.disabled)},get:{initialRating:function(){return k.data(f.rating)!==n?(k.removeData(f.rating),k.data(f.rating)):h.initialRating},maxRating:function(){return k.data(f.maxRating)!==n?(k.removeData(f.maxRating),k.data(f.maxRating)):h.maxRating},rating:function(){var e=C.filter("."+m.active).length;return d.verbose("Current rating retrieved",e),e}},set:{rating:function(e){var t=e-1>=0?e-1:0,i=C.eq(t);k.removeClass(m.selected),C.removeClass(m.selected).removeClass(m.active),e>0&&(d.verbose("Setting current rating to",e),i.prevAll().andSelf().addClass(m.active)),h.onRate.call(y,e)}},setting:function(t,i){if(d.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,h,t);else{if(i===n)return h[t];h[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,d,t);else{if(i===n)return d[t];d[t]=i}},debug:function(){h.debug&&(h.performance?d.performance.log(arguments):(d.debug=Function.prototype.bind.call(console.info,console,h.name+":"),d.debug.apply(console,arguments)))},verbose:function(){h.verbose&&h.debug&&(h.performance?d.performance.log(arguments):(d.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),d.verbose.apply(console,arguments)))},error:function(){d.error=Function.prototype.bind.call(console.error,console,h.name+":"),d.error.apply(console,arguments)},performance:{log:function(e){var t,i,n;h.performance&&(t=(new Date).getTime(),n=r||t,i=t-n,r=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:y,"Execution Time":i})),clearTimeout(d.performance.timer),d.performance.timer=setTimeout(d.performance.display,500)},display:function(){var t=h.name+":",i=0;r=!1,clearTimeout(d.performance.timer),e.each(s,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",o&&(t+=" '"+o+"'"),a.length>1&&(t+=" ("+a.length+")"),(console.group!==n||console.table!==n)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,a,o){var r,s,l,c=T;return a=a||u,o=y||o,"string"==typeof t&&c!==n&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(i,a){var o=i!=r?a+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(c[o])&&i!=r)c=c[o];else{if(c[o]!==n)return s=c[o],!1;if(!e.isPlainObject(c[a])||i==r)return c[a]!==n?(s=c[a],!1):!1;c=c[a]}})),e.isFunction(s)?l=s.apply(o,a):s!==n&&(l=s),e.isArray(i)?i.push(l):i!==n?i=[i,l]:l!==n&&(i=l),s}},c?(T===n&&d.initialize(),d.invoke(l)):(T!==n&&T.invoke("destroy"),d.initialize())}),i!==n?i:this},e.fn.rating.settings={name:"Rating",namespace:"rating",debug:!1,verbose:!1,performance:!0,initialRating:0,interactive:!0,maxRating:4,clearable:"auto",onRate:function(e){},error:{method:"The method you called is not defined",noMaximum:"No maximum rating specified. Cannot generate HTML automatically"},metadata:{rating:"rating",maxRating:"maxRating"},className:{active:"active",disabled:"disabled",selected:"selected",loading:"loading"},selector:{icon:".icon"},templates:{icon:function(e){for(var t=1,i="";e>=t;)i+='<i class="icon"></i>',t++;return i}}}}(jQuery,window,document);