/*!
 * # Semantic UI 1.12.3 - Video
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2014 Contributorss
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,t,i,n){"use strict";e.fn.video=function(i){var a,o=e(this),r=o.selector||"",s=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return o.each(function(){var h,p=e.isPlainObject(i)?e.extend(!0,{},e.fn.video.settings,i):e.extend({},e.fn.video.settings),m=p.selector,f=p.className,g=p.error,v=p.metadata,b=p.namespace,y=p.templates,T="."+b,k="module-"+b,C=(e(t),e(this)),E=C.find(m.placeholder),w=C.find(m.playButton),D=C.find(m.embed),I=this,S=C.data(k);h={initialize:function(){h.debug("Initializing video"),h.create(),E.on("click"+T,h.play),w.on("click"+T,h.play),h.instantiate()},instantiate:function(){h.verbose("Storing instance of module",h),S=h,C.data(k,h)},create:function(){var e=C.data(v.image),t=y.video(e);C.html(t),h.refresh(),e||h.play(),h.debug("Creating html for video element",t)},destroy:function(){h.verbose("Destroying previous instance of video"),h.reset(),C.removeData(k).off(T),E.off(T),w.off(T)},refresh:function(){h.verbose("Refreshing selector cache"),E=C.find(m.placeholder),w=C.find(m.playButton),D=C.find(m.embed)},change:function(e,t,i){h.debug("Changing video to ",e,t,i),C.data(v.source,e).data(v.id,t).data(v.url,i),p.onChange()},reset:function(){h.debug("Clearing video embed and showing placeholder"),C.removeClass(f.active),D.html(" "),E.show(),p.onReset()},play:function(){h.debug("Playing video");var e=C.data(v.source)||!1,t=C.data(v.url)||!1,i=C.data(v.id)||!1;D.html(h.generate.html(e,i,t)),C.addClass(f.active),p.onPlay()},get:{source:function(e){return"string"!=typeof e?!1:-1!==e.search("youtube.com")?"youtube":-1!==e.search("vimeo.com")?"vimeo":!1},id:function(e){return e.match(p.regExp.youtube)?e.match(p.regExp.youtube)[1]:e.match(p.regExp.vimeo)?e.match(p.regExp.vimeo)[2]:!1}},generate:{html:function(e,t,i){h.debug("Generating embed html");var n;return e=e||p.source,t=t||p.id,e&&t||i?(e&&t||(e=h.get.source(i),t=h.get.id(i)),"vimeo"==e?n='<iframe src="//player.vimeo.com/video/'+t+"?="+h.generate.url(e)+'" width="100%" height="100%" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>':"youtube"==e&&(n='<iframe src="//www.youtube.com/embed/'+t+"?="+h.generate.url(e)+'" width="100%" height="100%" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>')):h.error(g.noVideo),n},url:function(e){var t=p.api?1:0,i="auto"===p.autoplay?C.data("image")!==n:p.autoplay,a=p.hd?1:0,o=p.showUI?1:0,r=p.showUI?0:1,s="";return"vimeo"==e&&(s="api="+t+"&amp;title="+o+"&amp;byline="+o+"&amp;portrait="+o+"&amp;autoplay="+i,p.color&&(s+="&amp;color="+p.color)),"ustream"==e?(s="autoplay="+i,p.color&&(s+="&amp;color="+p.color)):"youtube"==e&&(s="enablejsapi="+t+"&amp;autoplay="+i+"&amp;autohide="+r+"&amp;hq="+a+"&amp;modestbranding=1",p.color&&(s+="&amp;color="+p.color)),s}},setting:function(t,i){if(h.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,p,t);else{if(i===n)return p[t];p[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,h,t);else{if(i===n)return h[t];h[t]=i}},debug:function(){p.debug&&(p.performance?h.performance.log(arguments):(h.debug=Function.prototype.bind.call(console.info,console,p.name+":"),h.debug.apply(console,arguments)))},verbose:function(){p.verbose&&p.debug&&(p.performance?h.performance.log(arguments):(h.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),h.verbose.apply(console,arguments)))},error:function(){h.error=Function.prototype.bind.call(console.error,console,p.name+":"),h.error.apply(console,arguments)},performance:{log:function(e){var t,i,n;p.performance&&(t=(new Date).getTime(),n=s||t,i=t-n,s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:I,"Execution Time":i})),clearTimeout(h.performance.timer),h.performance.timer=setTimeout(h.performance.display,100)},display:function(){var t=p.name+":",i=0;s=!1,clearTimeout(h.performance.timer),e.each(l,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",r&&(t+=" '"+r+"'"),o.length>1&&(t+=" ("+o.length+")"),(console.group!==n||console.table!==n)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,i,o){var r,s,l,c=S;return i=i||d,o=I||o,"string"==typeof t&&c!==n&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(i,a){var o=i!=r?a+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(c[o])&&i!=r)c=c[o];else{if(c[o]!==n)return s=c[o],!1;if(!e.isPlainObject(c[a])||i==r)return c[a]!==n?(s=c[a],!1):(h.error(g.method,t),!1);c=c[a]}})),e.isFunction(s)?l=s.apply(o,i):s!==n&&(l=s),e.isArray(a)?a.push(l):a!==n?a=[a,l]:l!==n&&(a=l),s}},u?(S===n&&h.initialize(),h.invoke(c)):(S!==n&&S.invoke("destroy"),h.initialize())}),a!==n?a:this},e.fn.video.settings={name:"Video",namespace:"video",debug:!1,verbose:!0,performance:!0,metadata:{id:"id",image:"image",source:"source",url:"url"},source:!1,url:!1,id:!1,aspectRatio:16/9,onPlay:function(){},onReset:function(){},onChange:function(){},onPause:function(){},onStop:function(){},width:"auto",height:"auto",autoplay:"auto",color:"#442359",hd:!0,showUI:!1,api:!0,regExp:{youtube:/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,vimeo:/http:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/},error:{noVideo:"No video specified",method:"The method you called is not defined"},className:{active:"active"},selector:{embed:".embed",placeholder:".placeholder",playButton:".play"}},e.fn.video.settings.templates={video:function(e){var t="";return e&&(t+='<i class="video play icon"></i><img class="placeholder" src="'+e+'">'),t+='<div class="embed"></div>'}}}(jQuery,window,document);